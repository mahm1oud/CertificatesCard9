# دليل استخدام وإدارة نظام الشهادات والبطاقات

## جدول المحتويات

1. [مقدمة](#مقدمة)
2. [متطلبات النظام](#متطلبات-النظام)
3. [التثبيت والإعداد](#التثبيت-والإعداد)
4. [استخدام النظام](#استخدام-النظام)
5. [المزايا المتقدمة](#المزايا-المتقدمة)
6. [الإدارة والصيانة](#الإدارة-والصيانة)
7. [استكشاف الأخطاء وإصلاحها](#استكشاف-الأخطاء-وإصلاحها)
8. [الأسئلة الشائعة](#الأسئلة-الشائعة)

## مقدمة

نظام الشهادات والبطاقات هو نظام متكامل لإنشاء وإدارة الشهادات والبطاقات الرقمية. يتيح النظام إنشاء قوالب مخصصة، إدارة المستخدمين، وتوليد وإصدار الشهادات بشكل فردي أو دفعي.

### الميزات الرئيسية

- إنشاء ومعاينة وتحرير قوالب الشهادات والبطاقات بواجهة سهلة الاستخدام
- نظام توثيق وصلاحيات متعدد المستويات
- دعم كامل للغة العربية والتخطيطات من اليمين إلى اليسار
- إمكانية الإصدار الفردي أو الإصدار الجماعي للشهادات
- نظام تحقق من صحة الشهادات باستخدام رمز QR وروابط فريدة

## متطلبات النظام

### الحد الأدنى من المتطلبات

- خادم ويب (Apache/Nginx) مع PHP 7.4 أو أحدث
- MySQL 5.7 أو أحدث (أو MariaDB 10.3 أو أحدث)
- Node.js 16.0 أو أحدث 
- مساحة تخزين: 500 ميجابايت على الأقل
- ذاكرة رام: 1 جيجابايت على الأقل

### المتطلبات الموصى بها

- نظام التشغيل: Linux (Ubuntu 20.04 LTS أو أحدث)
- MySQL 8.0 أو أحدث
- Node.js 18.0 أو أحدث
- مساحة تخزين: 2 جيجابايت أو أكثر
- ذاكرة رام: 2 جيجابايت أو أكثر

## التثبيت والإعداد

### خيار 1: التثبيت التلقائي باستخدام واجهة المثبت

1. قم بزيارة `http://your-domain.com/install.php` في متصفح الويب
2. اتبع التعليمات على الشاشة لإدخال معلومات قاعدة البيانات وإعداد المدير
3. سيقوم المثبت تلقائيًا بتهيئة قاعدة البيانات وإعداد الملفات المطلوبة

### خيار 2: التثبيت اليدوي

1. قم بنسخ ملف `.env.example` إلى `.env` وتعديل المتغيرات حسب بيئة الاستضافة الخاصة بك
2. قم بإنشاء قاعدة بيانات MySQL فارغة
3. قم بتشغيل الأمر التالي لتثبيت التطبيق:

```bash
# تثبيت اعتماديات Node.js
npm install

# تهيئة قاعدة البيانات
node install/scripts/install.js
```

4. بعد الانتهاء من التثبيت، يمكنك تسجيل الدخول باستخدام بيانات الاعتماد الافتراضية:
   - اسم المستخدم: `admin`
   - كلمة المرور: `700700`

> ⚠️ **ملاحظة هامة**: قم بتغيير كلمة المرور الافتراضية فور تسجيل الدخول لأول مرة!

## استخدام النظام

### الواجهة الرئيسية

بعد تسجيل الدخول، ستتمكن من الوصول إلى لوحة القيادة التي توفر نظرة عامة على:

- إحصائيات النظام (عدد القوالب، الشهادات، المستخدمين)
- الشهادات الأخيرة
- القوالب المتاحة

### إنشاء قالب جديد

1. انتقل إلى قسم "القوالب" من القائمة الجانبية
2. انقر على زر "قالب جديد"
3. قم بتحميل صورة خلفية للقالب
4. أضف الحقول المطلوبة (النص، التواريخ، الصور)
5. قم بتخصيص موضع ونمط كل حقل
6. انقر على "حفظ" لتخزين القالب

### إضافة حقول للقالب

يمكنك إضافة أنواع مختلفة من الحقول للقالب:

- **حقول نصية**: للأسماء والعناوين والمحتوى
- **حقول تاريخ**: لتواريخ الإصدار والانتهاء
- **حقول صورة**: للتوقيعات والأختام والشعارات
- **حقول QR**: لإضافة رموز التحقق

### إصدار شهادة فردية

1. انتقل إلى قسم "إصدار جديد"
2. اختر القالب المطلوب
3. أدخل بيانات المستلم
4. قم بمعاينة الشهادة
5. انقر على "إصدار" لتوليد الشهادة

### إصدار شهادات بالجملة

1. انتقل إلى قسم "الإصدار الجماعي"
2. اختر القالب المطلوب
3. قم بتحميل ملف Excel أو CSV يحتوي على بيانات المستلمين
4. تأكد من تطابق أعمدة الملف مع حقول القالب
5. انقر على "إصدار" لتوليد الشهادات بشكل جماعي

## المزايا المتقدمة

### نظام التحقق من الشهادات

يوفر النظام آلية للتحقق من صحة الشهادات:

1. كل شهادة تحتوي على رمز تحقق فريد
2. يمكن التحقق من صحة الشهادة عبر رابط مباشر أو مسح رمز QR
3. صفحة التحقق تعرض تفاصيل الشهادة وتاريخ إصدارها

### محرر الطبقات المتقدم

محرر الطبقات المتقدم يتيح:

1. ترتيب طبقات العناصر (النصوص، الصور، الخلفيات)
2. ضبط الشفافية والدوران لكل عنصر
3. إضافة تأثيرات وظلال متقدمة
4. تخصيص الخطوط ودرجات الألوان

### إعدادات المظهر

يمكن تخصيص مظهر واجهة المستخدم:

1. الوضع الفاتح / الداكن
2. تغيير ألوان الواجهة الرئيسية
3. ضبط تخطيط لوحة القيادة

## الإدارة والصيانة

### النسخ الاحتياطي

ينصح بعمل نسخ احتياطية دورية للنظام:

```bash
# إنشاء نسخة احتياطية يدوية
node install/scripts/backup.js backup

# عرض قائمة النسخ الاحتياطية المتاحة
node install/scripts/backup.js list

# استعادة نسخة احتياطية
node install/scripts/backup.js restore path/to/backup.sql.gz
```

يمكن جدولة النسخ الاحتياطي التلقائي بتعديل ملف `crontab`:

```bash
# فتح ملف crontab للتحرير
crontab -e

# إضافة السطر التالي لجدولة نسخ احتياطي يومي
0 3 * * * cd /path/to/app && node install/scripts/backup.js backup
```

### التحديثات

لتحديث النظام إلى أحدث إصدار:

```bash
# التحقق من وجود تحديثات
node install/scripts/update.js

# متابعة عملية التحديث حسب التعليمات
```

### فحص الأمان

لإجراء فحص أمني شامل للنظام:

```bash
# إجراء فحص أمني كامل
node install/scripts/security.js audit

# فحص أذونات الملفات
node install/scripts/security.js permissions

# تنظيف وتدوير ملفات السجلات
node install/scripts/security.js rotate-logs
```

## استكشاف الأخطاء وإصلاحها

### مشاكل شائعة وحلولها

| المشكلة | السبب المحتمل | الحل |
|---------|---------------|------|
| خطأ في الاتصال بقاعدة البيانات | بيانات اعتماد غير صحيحة أو مشكلة في الخادم | تحقق من إعدادات قاعدة البيانات في ملف .env والتأكد من تشغيل خدمة MySQL |
| مشاكل في توليد الصور | مكتبات GD غير متوفرة | تأكد من تثبيت حزمة PHP-GD، تشغيل الأمر `apt-get install php-gd` |
| مشاكل تسجيل الدخول | تلف جدول المستخدمين | استخدم `node scripts/update-admin-password.js` لإعادة تعيين كلمة مرور المدير |
| توقف الخادم | نفاد موارد الخادم | تحقق من استخدام المعالج والذاكرة، قد تحتاج إلى ترقية موارد الخادم |

### ملفات السجلات

للاطلاع على سجلات التطبيق للمساعدة في تحديد المشكلات:

- **سجل التطبيق**: `/logs/app.log`
- **سجل الأخطاء**: `/logs/error.log`
- **سجل الأمان**: `/logs/security.log`
- **سجل النسخ الاحتياطي**: `/logs/backup.log`

## الأسئلة الشائعة

### عامة

**س: هل يمكن استخدام النظام بدون اتصال بالإنترنت؟**

ج: نعم، يمكن تثبيت النظام على خادم محلي واستخدامه بدون اتصال بالإنترنت. ومع ذلك، بعض الميزات مثل التحقق من الشهادات عبر الرابط المباشر ستتطلب اتصالاً بالإنترنت.

**س: هل النظام متعدد اللغات؟**

ج: نعم، النظام يدعم اللغة العربية والإنجليزية بشكل افتراضي. يمكن إضافة لغات أخرى عبر ملفات الترجمة في مجلد `/translations`.

### القوالب والشهادات

**س: ما هي أبعاد وأنواع الصور المدعومة للقوالب؟**

ج: يدعم النظام الصور بصيغة JPG و PNG و SVG. الأبعاد المثالية هي 1920×1080 بكسل (أفقي) أو 1080×1920 بكسل (عمودي).

**س: هل يمكن استخدام خطوط مخصصة؟**

ج: نعم، يمكن إضافة خطوط مخصصة عن طريق وضع ملفات الخطوط (TTF) في مجلد `/fonts` ثم استخدامها في القوالب.

**س: هل يمكن توليد شهادات بتنسيقات أخرى غير PDF و JPG؟**

ج: النظام يدعم إصدار الشهادات بتنسيقات PDF و JPG و PNG بشكل افتراضي. يمكن إضافة دعم لتنسيقات أخرى عبر تعديل الكود المصدري.

### الإدارة

**س: كيف يمكنني زيادة عدد المستخدمين؟**

ج: انتقل إلى صفحة "إدارة المستخدمين" من لوحة التحكم واضغط على "إضافة مستخدم جديد".

**س: ما هي أدوار المستخدمين المتاحة؟**

ج: النظام يوفر ثلاثة أدوار: مدير (admin)، محرر (editor)، ومستخدم عادي (user). لكل دور صلاحيات مختلفة.

**س: كيف يمكنني نقل النظام إلى خادم آخر؟**

ج: قم بعمل نسخة احتياطية من قاعدة البيانات والملفات، ثم استعد النسخة الاحتياطية على الخادم الجديد بعد تثبيت النظام عليه.

---

للحصول على مزيد من المساعدة، يرجى زيارة [مركز الدعم](https://example.com/support) أو التواصل مع [فريق الدعم الفني](mailto:support@example.com).