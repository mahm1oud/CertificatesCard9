# دليل تثبيت ونشر نظام الشهادات والبطاقات

## نظرة عامة

يحتوي هذا المجلد على جميع الأدوات والسكريبتات اللازمة لتثبيت ونشر وصيانة نظام الشهادات والبطاقات.

## محتويات المجلد

- **`scripts/`**: سكريبتات التثبيت والصيانة
  - `install.js`: سكريبت التثبيت الرئيسي
  - `backup.js`: أداة النسخ الاحتياطي واستعادة البيانات
  - `update.js`: أداة تحديث النظام
  - `security.js`: أدوات تحسين الأمان
  - `convert-pg-to-mysql.js`: أداة تحويل قاعدة البيانات من PostgreSQL إلى MySQL
  - `hostinger-setup.sh`: سكريبت الإعداد السريع على استضافة Hostinger

- **`config/`**: ملفات التكوين النموذجية
  - `env.template`: قالب ملف `.env`
  - `config.json.example`: قالب ملف التكوين الرئيسي
  - `ecosystem.config.js`: ملف تكوين PM2 للنشر

- **`docs/`**: وثائق المشروع
  - `USAGE_GUIDE.md`: دليل استخدام النظام
  - `BACKUP_GUIDE.md`: دليل النسخ الاحتياطي واستعادة البيانات
  - `UPDATES_GUIDE.md`: دليل تحديثات النظام
  - `HOSTINGER_DEPLOYMENT.md`: دليل نشر التطبيق على استضافة Hostinger

- **`mysql/`**: سكريبتات SQL لـ MySQL (يتم إنشاؤها تلقائيًا من خلال سكريبت التحويل)
  - `schema.sql`: هيكل قاعدة البيانات
  - `seed.sql`: بيانات أولية لقاعدة البيانات

## طرق التثبيت

### 1. التثبيت التلقائي باستخدام واجهة المستخدم

أبسط طريقة للتثبيت هي استخدام واجهة المستخدم المدمجة:

1. قم بزيارة `http://your-domain.com/install.php` في متصفح الويب
2. اتبع الخطوات المعروضة على الشاشة لإكمال عملية التثبيت

### 2. التثبيت اليدوي

يمكنك أيضًا تثبيت النظام يدويًا باتباع الخطوات التالية:

1. قم بإنشاء قاعدة بيانات فارغة في MySQL/PostgreSQL
2. انسخ `install/config/env.template` إلى `.env` في المجلد الرئيسي وقم بتعديله وفقًا لإعداداتك
3. قم بتثبيت الاعتماديات وبناء التطبيق:

```bash
# تثبيت الاعتماديات
npm install

# بناء التطبيق
npm run build
```

4. قم بتشغيل سكريبت التثبيت:

```bash
node install/scripts/install.js
```

### 3. التثبيت على استضافة Hostinger

لنشر النظام على استضافة Hostinger، استخدم السكريبت المخصص:

```bash
bash install/scripts/hostinger-setup.sh
```

هذا السكريبت سيرشدك خلال العملية بأكملها، بما في ذلك:
- إعداد قاعدة بيانات MySQL
- تكوين Nginx
- تكوين PM2
- إعداد شهادات SSL

## إدارة النسخ الاحتياطية

### إنشاء نسخة احتياطية

```bash
node install/scripts/backup.js backup
```

### استعادة نسخة احتياطية

```bash
node install/scripts/backup.js restore path/to/backup.sql.gz
```

### عرض قائمة النسخ الاحتياطية المتاحة

```bash
node install/scripts/backup.js list
```

## تحديث النظام

للتحقق من وجود تحديثات وتطبيقها:

```bash
node install/scripts/update.js
```

## تحسين الأمان

لإجراء فحص أمني شامل وتطبيق أفضل الممارسات الأمنية:

```bash
node install/scripts/security.js audit
```

## تحويل قاعدة البيانات من PostgreSQL إلى MySQL

إذا كنت بحاجة إلى نقل البيانات من قاعدة بيانات PostgreSQL إلى MySQL (مفيد عند النشر على استضافة تدعم MySQL فقط):

```bash
node install/scripts/convert-pg-to-mysql.js
```

## مزيد من المعلومات

للحصول على معلومات أكثر تفصيلاً، يرجى الرجوع إلى الوثائق في مجلد `docs/`:

- للاستخدام اليومي: `USAGE_GUIDE.md`
- للنسخ الاحتياطي واستعادة البيانات: `BACKUP_GUIDE.md`
- لتحديثات النظام: `UPDATES_GUIDE.md`
- للنشر على Hostinger: `HOSTINGER_DEPLOYMENT.md`

## الدعم والمساعدة

إذا واجهت أي مشكلة أثناء التثبيت أو النشر، يرجى الاتصال بفريق الدعم الفني.

---

آخر تحديث: مايو 2025